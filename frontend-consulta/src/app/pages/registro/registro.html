<div class="registro-page">
    <div class="registro-card">
        
        <h2 class="registro-title">Crea una Cuenta</h2>
        <p class="registro-subtitle">Ingresa tus datos para registrarte en la plataforma.</p>
        
        <form [formGroup]="form" (ngSubmit)="onSubmit()">
            
            <div class="form-group">
                <label for="rut">RUT</label>
                <input id="rut" type="text" formControlName="rut" placeholder="Ej: 12345678-K">
                <div *ngIf="f['rut'].touched && f['rut'].errors">
                    <p class="error" *ngIf="f['rut'].errors['required']">El RUT es obligatorio.</p>
                    <p class="error" *ngIf="f['rut'].errors['rutInvalido'] || f['rut'].errors['rutFormatoInvalido']">El formato del RUT no es válido.</p>
                </div>
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                <input id="email" type="email" formControlName="email" placeholder="ejemplo@correo.com">
                <div *ngIf="f['email'].touched && f['email'].errors">
                    <p class="error" *ngIf="f['email'].errors['required']">El email es obligatorio.</p>
                    <p class="error" *ngIf="f['email'].errors['email']">Debe ser un formato de email válido.</p>
                </div>
            </div>

            <div class="form-group">
                <label for="password">Contraseña</label>
                <input id="password" type="password" formControlName="password" placeholder="Mínimo 6 caracteres">
                <div *ngIf="f['password'].touched && f['password'].errors">
                    <p class="error" *ngIf="f['password'].errors['required']">La contraseña es obligatoria.</p>
                    <p class="error" *ngIf="f['password'].errors['minlength']">La contraseña debe tener al menos 6 caracteres.</p>
                </div>
            </div>

            <div class="form-group">
                <label for="nombre">Nombre</label>
                <input id="nombre" type="text" formControlName="nombre">
                <div *ngIf="f['nombre'].touched && f['nombre'].errors?.['required']">
                    <p class="error">El nombre es obligatorio.</p>
                </div>
            </div>

            <div class="form-group">
                <label for="apellido">Apellido</label>
                <input id="apellido" type="text" formControlName="apellido">
                <div *ngIf="f['apellido'].touched && f['apellido'].errors?.['required']">
                    <p class="error">El apellido es obligatorio.</p>
                </div>
            </div>
            
            <div class="form-group">
                <label for="fechaNacimiento">Fecha de Nacimiento</label>
                <input id="fechaNacimiento" type="date" formControlName="fechaNacimiento"> 
                
                <div *ngIf="f['fechaNacimiento'].touched && f['fechaNacimiento'].errors">
                    <p class="error" *ngIf="f['fechaNacimiento'].errors['required']">La fecha de nacimiento es obligatoria.</p>
                    <p class="error" *ngIf="f['fechaNacimiento'].errors['fechaFutura']">La fecha no puede ser en el futuro.</p>
                    <p class="error" *ngIf="f['fechaNacimiento'].errors['edadExcesiva']">Fecha de nacimiento no válida (edad máxima 120 años).</p>
                </div>
            </div>

            <button type="submit" 
                    [disabled]="form.invalid || loading">
                <span *ngIf="loading">Creando cuenta...</span>
                <span *ngIf="!loading">Registrarse</span>
            </button>
        </form>

        <p *ngIf="errorMsg" class="error message">
            {{ errorMsg }}
        </p>
        <p *ngIf="successMsg" class="success message">
            {{ successMsg }}
        </p>

        <p class="registro-footer-text">
            ¿Ya tienes cuenta? <a routerLink="/login">Inicia Sesión aquí</a>.
        </p>
    </div>
</div>
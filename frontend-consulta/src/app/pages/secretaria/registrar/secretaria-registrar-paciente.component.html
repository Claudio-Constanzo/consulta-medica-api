<div class="min-h-screen bg-amber-50 p-6 flex justify-center">
  <div class="w-full max-w-3xl space-y-6">
    <button (click)="volver()" class="text-stone-600 hover:text-stone-900" type="button">← Volver</button>

    <h1 class="text-3xl font-bold text-stone-900">Registrar Paciente</h1>

    <div class="bg-white p-6 rounded-3xl border space-y-3">
      <label class="font-semibold">RUT del paciente</label>
      <input
        class="w-full px-4 py-2 border rounded-xl"
        [ngClass]="pacienteExiste ? 'border-red-400' : 'border-stone-300'"
        [value]="rut"
        (input)="rutChanged($any($event.target).value)"
        placeholder="11.111.111-1"
      />

      <p *ngIf="pacienteExiste" class="text-red-700">⚠ Este paciente ya está registrado.</p>
      <p *ngIf="error && !pacienteExiste" class="text-red-700">⚠ {{ error }}</p>
    </div>

    <form (submit)="submit($event)" class="bg-white p-8 rounded-3xl border space-y-4">
      <div>
        <label class="font-semibold block mb-1">Nombre</label>
        <input name="nombre" [(ngModel)]="form.nombre" [disabled]="lockBasicFields"
          class="w-full px-4 py-2 border rounded-xl" />
      </div>

      <div>
        <label class="font-semibold block mb-1">Apellido</label>
        <input name="apellido" [(ngModel)]="form.apellido" [disabled]="lockBasicFields"
          class="w-full px-4 py-2 border rounded-xl" />
      </div>

      <div>
        <label class="font-semibold block mb-1">Email</label>
        <input name="email" [(ngModel)]="form.email" [disabled]="lockBasicFields"
          class="w-full px-4 py-2 border rounded-xl" />
      </div>

      <div>
        <label class="font-semibold block mb-1">Teléfono</label>
        <input name="telefono" [(ngModel)]="form.telefono" class="w-full px-4 py-2 border rounded-xl" />
      </div>

      <div>
        <label class="font-semibold block mb-1">Dirección</label>
        <input name="direccion" [(ngModel)]="form.direccion" class="w-full px-4 py-2 border rounded-xl" />
      </div>

      <div>
        <label class="font-semibold block mb-1">Previsión</label>
        <input name="prevision" [(ngModel)]="form.prevision" class="w-full px-4 py-2 border rounded-xl" />
      </div>

      <button type="submit" [disabled]="pacienteExiste"
        class="w-full py-3 rounded-xl bg-stone-900 text-white font-semibold disabled:opacity-60">
        Guardar Paciente
      </button>
    </form>
  </div>
</div>
